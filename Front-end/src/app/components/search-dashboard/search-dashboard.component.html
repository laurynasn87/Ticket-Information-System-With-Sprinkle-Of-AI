<main class="main-bg">

    <div class="container-fluid mb-3">
        <div class="search-container">
            <div class="card search-card">
              <h3 class="card-title ">Search</h3>
              <div class="form">
                <i class="fa fa-search" (click)="this.initSearch(this.SearchTerm.nativeElement.value)"></i> <input class="form-control form-input form-control-lg mr-sm-2 searchbar" (keyup.enter)="initSearch(searchTerm.value)" type="text" [placeholder]="searchPlaceHolder" aria-label="Search" #searchTerm>
                <span class="left-pan">
                  <select class="form-select type-selection" (change)="SearchTypeValueChange($event)" aria-label="Select a type">
                    <option selected value="Ticket">Tickets</option>
                    <option value="User">Users</option>
                    <option value="Organization" *ngIf="!this.authService.isRequester">Organizations</option>
                  </select>
                </span>
              </div>
            <div class="accordion mb-2" id="accordionExample" *ngIf="this.Filters.length > 0">
                <div class="accordion-item">
                  <h2 class="accordion-header iconwrapper" id="headingOne">
                       <i class="fa fa-chevron-down rotate" [ngClass]="FiltersExpanded ? 'down' : ''" (click)="expandSearch(this)"   data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne"></i>
                  </h2>
                  <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                    <div class="row">
                      <div class="col-md" *ngFor="let filter of this.Filters">
                        <p class=" mb-2 ">{{filter.Name}}</p>
                        <ng-multiselect-dropdown
                              class ="dropdowns"
                              [placeholder]="filter.Placeholder"
                              [settings]="this.dropdownSettings"
                              [data]="filter.Data"
                              [(ngModel)]="filter.SelectedItems"
                              (onSelect)="onItemSelect($event)"
                              (onDeSelect)="onItemDeSelect($event)"
                              (onSelectAll)="onSelectAll($event)">
                          </ng-multiselect-dropdown>
                        </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="card result-card ">
              <h3 *ngIf="this.data?.length == 0 && !this.loading" class="text-muted justify-content-center"> No items to show</h3>
              <mat-spinner class="spinner" *ngIf="this.loading"></mat-spinner>
              <table *ngIf="this.data?.length > 0" class="table table-striped table-hover">
                <thead class="table-head">
                    <tr>
                      <th class="dataCol" scope="col" (click)="setOrderField(column.dataName)" *ngFor="let column of dataColumns">{{column.name}} <i *ngIf="column.dataName == orderField && Ascending" class="fa fa-long-arrow-up ml-2" aria-hidden="true"></i> <i *ngIf="column.dataName == orderField && !Ascending" class="fa fa-long-arrow-down ml-2" aria-hidden="true"></i></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let row of data | paginate: { id:'some_id', itemsPerPage: recordsPerPage, currentPage: page, totalItems: totalRecords }">
                      <ng-container  *ngFor="let column of dataColumns">
                        <th scope="row" (click)="this.openDashboard(row.id)" *ngIf="column.dataName == 'id'" class="text-muted li-link">#{{row[column.dataName]}}</th>
                        <td scope="col" (click)="this.openDashboard(row.id)" *ngIf="column.dataName != 'id'" class="li-link">{{GetDataProperty(column.dataName,row)}}</td>
                      </ng-container >
                    </tr>
                  </tbody>
              </table>
              <div class="d-flex justify-content-center" *ngIf="this.data?.length > 0">
                <pagination-controls  id="some_id"
                (pageChange)="onPageChange($event)"
                (pageBoundsCorrection)="onPageChange($event)"
                (maxSize)="recordsPerPage"
                (directionLinks)="true"
                (autoHide)="true"
                (responsive)="true"
                previousLabel="Previous"
                nextLabel="Next"
                screenReaderPaginationLabel="Pagination"
                screenReaderPageLabel="page"
                screenReaderCurrentLabel="You're on page">
                </pagination-controls>
              </div>
            </div>
    </div>
</div>
</main>